model:
  name: commerce
  version: 1.0.0
  domain: sales
  owners:
    - data-platform@company.com
  state: draft

entities:
  - name: Customer
    type: table
    description: Customer master record
    tags: [PII, GOLD]
    fields:
      - name: customer_id
        type: integer
        primary_key: true
        nullable: false
      - name: email
        type: string
        nullable: false
        unique: true

  - name: Order
    type: table
    fields:
      - name: order_id
        type: integer
        primary_key: true
        nullable: false
      - name: customer_id
        type: integer
        nullable: false
      - name: total_amount
        type: decimal(12,2)
        nullable: false

relationships:
  - name: customer_orders
    from: Customer.customer_id
    to: Order.customer_id
    cardinality: one_to_many

governance:
  classification:
    Customer.email: PII
  stewards:
    sales: owner-sales@company.com

rules:
  - name: order_total_non_negative
    target: Order.total_amount
    expression: "value >= 0"
    severity: error
